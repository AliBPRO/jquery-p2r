+function(t){"use strict";var e=function(e,o){this.element=e,this.$element=t(e),this.options=t.extend({},self.DEFAULTS,o),this.flags={moving:!1,touched:!1,isTouch:!1,refreshed:!1},this.positions={startY:0,startX:0,lastStep:0}};e.key="pulltorefresh",e.DEFAULTS={sensibility:5,refresh:200,lockRefresh:!1,resetRefresh:!1,autoInit:!0,resetSpeed:"100ms",simulateTouch:!0,threshold:20},e.namespace=function(t){return[t,e.key].join(".")},e.support={touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}()},e.events=function(){if(e.support.touch)return{start:e.namespace("touchstart"),move:e.namespace("touchmove"),end:e.namespace("touchend")};var t={start:e.namespace("mousedown"),move:e.namespace("mousemove"),end:e.namespace("mouseup")};return window.navigator.msPointerEnabled&&(t={start:e.namespace("MSPointerDown"),move:e.namespace("MSPointerMove"),end:e.namespace("MSPointerUp")}),window.navigator.pointerEnabled&&(t={start:e.namespace("pointerdown"),move:e.namespace("pointermove"),end:e.namespace("pointerup")}),t}(),e.prototype.construct=function(){var o=this;o.$element.on(e.events.start,o.proxy(o.onTouchStart,o)).on(e.events.move,o.proxy(o.onTouchMove,o)).on(e.events.end,o.proxy(o.onTouchEnd,o)),o.options.simulateTouch&&(o.$element.on(e.namespace("mousedown"),o.proxy(o.onTouchStart,o)),t(document).on(e.namespace("mousemove"),o.$element,o.proxy(o.onTouchMove,o)).on(e.namespace("mouseup"),o.$element,o.proxy(o.onTouchEnd,o)))},e.prototype.destroy=function(){this.$element.off(e.namespace("")),t(document).off(e.namespace(""))},e.prototype.proxy=function(){var e=!!Function.prototype.bind;return e?function(t,e){return t.bind(e)}:t.proxy?t.proxy:function(t,e){var o,s,n;return"string"==typeof e&&(o=t[e],e=t,t=o),"function"==typeof t?void 0:(s=Array.prototype.slice.call(arguments,2),n=function(){return t.apply(e||this,s.concat(slice.call(arguments)))},n.guid=t.guid=t.guid||jQuery.guid++,n)}}(),e.prototype.transform=function(t,e){t.webkitTransform="translate(0, "+e+"px) translateZ(0)",t.msTransform=t.MsTransform=t.MozTransform=t.OTransform=t.transform="translateY("+e+"px)"},e.prototype.transition=function(t,e){t.webkitTransitionDuration=t.MozTransitionDuration=t.msTransitionDuration=t.OTransitionDuration=t.transitionDuration=e},e.prototype.getAxis=function(t,e){return{x:e?(t.targetTouches||t.originalEvent.targetTouches)[0].pageX:t.pageX||t.clientX,y:e?(t.targetTouches||t.originalEvent.targetTouches)[0].pageY:t.pageY||t.clientY}},e.prototype.onTouchStart=function(t){var o="touchstart"===t.type,s=this.getAxis(t,o);(o||1===t.which)&&(this.flags.touched=!0,this.flags.refreshed=!1,this.flags.isTouch=o,this.positions.startY=s.y,this.positions.startX=s.x,this.$element.trigger(e.namespace("start"),[s.y]),this.transition(this.element.style,"0ms"),t.stopPropagation(),t.preventDefault())},e.prototype.onTouchMove=function(t){var o,s,n,i,r="touchmove"===t.type;if(this.flags.touched&&(!this.flags.isTouch||"mousemove"!==t.type)){if(i=this.getAxis(t,r),o=i.y-this.positions.startY,i.x-this.positions.startX>this.options.threshold)return void this.reset();if(!(0>o))return o>=this.options.refresh&&!this.flags.refreshed&&(this.$element.trigger(e.namespace("refresh"),[i.y]),this.flags.refreshed=!0,this.options.resetRefresh)?void this.reset():void(this.flags.refreshed&&this.options.lockRefresh||(s=parseInt(o/this.options.sensibility,10),this.positions.lastStep!=s&&(n=parseInt(100*o/this.options.refresh,10),this.$element.trigger(e.namespace("move"),n),this.positions.lastStep=s),this.transform(this.element.style,o),t.stopPropagation(),t.preventDefault()))}},e.prototype.reset=function(){this.transition(this.element.style,this.options.resetSpeed),this.transform(this.element.style,0),this.flags.touched=!1,this.flags.isTouch=!1,this.flags.refreshed=!1,this.positions.startY=!1},e.prototype.onTouchEnd=function(t){this.flags.touched&&(this.positions.startY=0,this.positions.startX=0,this.reset(),this.$element.trigger(e.namespace("end")),t.stopPropagation(),t.preventDefault())}}(window.jQuery||window.Zepto);